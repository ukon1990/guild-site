<mat-paginator *ngIf="data.length > pageRows[0]"
  [length]="data.length"
  [pageSize]="pageEvent.pageSize"
  [pageSizeOptions]="pageRows"
  [pageIndex]="pageEvent.pageIndex"
  (page)="pageChange($event)">
</mat-paginator>
<table class="table table-hover table-bordered table-striped table-sm">
  <thead>
    <tr>
      <td>#</td>
      <td *ngFor="let c of columns" (click)="sort(c.key)">
        <wah-sort-icon [key]="sorter.getKey(c.key)"></wah-sort-icon>
        {{ c.title }}
      </td>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let d of data | slice:getFromValue():getToValue(); let i = index">
      <td>{{ i + 1 }}</td>
      <td *ngFor="let c of columns;">
        <span [ngSwitch]="c.dataType">
          <span *ngSwitchCase="'name'">
            <mat-spinner *ngIf="d.downloading && (d.downloading.logs || d.downloading.character)"
              class="float-left" [diameter]="12"></mat-spinner>
            {{ d[c.key] }}
          </span>
          <span *ngSwitchCase="'spec'">
            <mat-select [(ngModel)]="d[c.key]" (change)="changeSpec(d, $event)">
              <mat-option *ngFor="let spec of d.specs" [value]="spec.name">
                {{ spec.name }}
              </mat-option>
            </mat-select>
          </span>
          <span *ngSwitchCase="'raider-profile'">
            <a [routerLink]="'/roster/' + d.realm + '/' + d.name">
              <span class="mr-2"><i class="fas fa-eye"></i></span>
              View
            </a>
          </span>
          <span *ngSwitchCase="'percent'">
            {{ d[c.key] | number:'1.0-0' }}%
          </span>
          <span *ngSwitchCase="'number'">
            {{ d[c.key] | number }}
          </span>
          <span *ngSwitchCase="'date'">
            {{ d[c.key] | date}}
          </span>
          <span *ngSwitchCase="'time'">
            {{ timeToMinutesAndSeconds(d[c.key]) }}
          </span>
          <span *ngSwitchDefault>{{ d[c.key] }}</span>
        </span>
      </td>
    </tr>
  </tbody>
</table>

<mat-paginator *ngIf="data.length > pageRows[0]"
  [length]="data.length"
  [pageSize]="pageEvent.pageSize"
  [pageSizeOptions]="pageRows"
  [pageIndex]="pageEvent.pageIndex"
  (page)="pageChange($event)">
</mat-paginator>
