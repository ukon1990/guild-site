<div class="character character-bg clearfix" [style.background-image]="getBackgroundImage()" [style.background-color]="getBackgroundColor()">
  <!-- Basic data -->
  <div class="clearfix">
    <a routerLink="/roster">
			<i class="fa fa-chevron-left" aria-hidden="true"></i>
			Back to guild roster
		</a>
  </div>
  <span *ngIf="character.items">
		<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 64 64" class="Icon-svg mini-icon">
			<use xlink:href="assets/images/icons/Icon.svg#achievement-shield"></use>
		</svg> {{ character.achievementPoints }}

		<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 64 64" class="Icon-svg mini-icon">
			<use xlink:href="assets/images/icons/Icon.svg#swords"></use>
		</svg> {{ character.items.averageItemLevelEquipped }} / {{ character.items.averageItemLevel }}
	</span>
  <span class="pull-right">
		Last updated {{ character.lastModified | date:'HH:mm dd.MMM, yyyy' }}
	</span>
  <h3 class="card-title">{{ character.name }}</h3>
  <h6 class="card-subtitle mb-2">
    {{ character.level }} {{ characterSpecialization }} {{ classes[character.class] }} {{ character.realm }}
  </h6>

  <!--
    <nav md-tab-nav-bar>
      <a md-tab-link
        *ngFor="let link of navLinks"
        [routerLink]="link"
        routerLinkActive #rla="routerLinkActive"
        [active]="rla.isActive">
        {{tabLink.label}}
      </a>
    </nav>

    <router-outlet></router-outlet>
   -->

  <md-tab-group (selectChange)="onTabChanged($event)" [selectedIndex]="page.selectedTabIndex"><!-- [selectedIndex]="3" -->
    <md-tab label="Equipment">
      <app-character-items [items]="character?.items"></app-character-items>
    </md-tab>
    <md-tab label="Raid progress">
      <nav class="col-md-12">
        <md-paginator [length]="character?.progression?.raids?.length" [pageSize]="page.pageSize" [pageSizeOptions]="page.pageSizeOptions"
          (page)="pageEvent = $event">
        </md-paginator>
      </nav>
      <div class="clearfix" *ngIf="character.progression">
        <div *ngFor="let raid of character?.progression?.raids |
				slice: 
					(pageEvent.pageSize * (pageEvent.pageIndex + 1)) - pageEvent.pageSize:
					pageEvent.pageSize * (pageEvent.pageIndex + 1)">
          <app-character-progress [raid]="raid" class="col-md-4 float-left"></app-character-progress>
        </div>
      </div>
      <div class="col-md-12">
        <md-paginator [length]="character?.progression?.raids?.length" [pageSize]="page.pageSize" [pageSizeOptions]="page.pageSizeOptions"
          (page)="pageEvent = $event">
        </md-paginator>
      </div>
    </md-tab>
    <md-tab label="Warcraft logs">
      <app-character-logs [character]="character"></app-character-logs>
    </md-tab>
    <md-tab label="Achievements" *ngIf="achievementsService !== null && achievementsService?.achievements !== null">
      <div *ngIf="selectedAchivementGroupIndex === -1; else achivementGroup">
        <app-character-achievement-list-item (click)="selectAchievementGroup(i, a.name)"
          *ngFor="let a of achievementsService?.achievements; let i = index" 
          [achievementGroup]="a"
          [completedAchievements]="character?.achievements?.achievementsCompleted"></app-character-achievement-list-item>
      </div>
      <ng-template #achivementGroup>
        <app-character-achievement *ngIf="achievementsService?.achievements"
          [completedAchievements]="character?.achievements?.achievementsCompleted"
          [completedAchievementsTimestamp]="character?.achievements?.achievementsCompletedTimestamp"
          [achievementGroup]="achievementsService?.achievements[selectedAchivementGroupIndex]"
          (resetIndex)="unselectAchievementGroup($event)"></app-character-achievement>
      </ng-template>
    </md-tab>
    <md-tab label="Pvp">
      PvP?
    </md-tab>
    <md-tab label="Statistics">
      Same as armory stats?
    </md-tab>
  </md-tab-group>
</div>
